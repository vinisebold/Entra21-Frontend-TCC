<nav
  class="h-full overflow-hidden"
  (click)="expandOnBackgroundClick()"
  [class.cursor-e-resize]="collapsed()"
>
  <div class="flex items-center justify-between p-3 mt-2 mb-8">
    <div class="flex items-center space-x-2">
      <button
        class="w-10 h-10 rounded-xl flex items-center justify-center shrink-0 hover:bg-surface-container2 transition-colors"
        (click)="$event.stopPropagation(); collapsed() && toggle()"
        (mouseenter)="logoHovered.set(true)"
        (mouseleave)="logoHovered.set(false)"
        [attr.aria-pressed]="collapsed()"
        [attr.aria-label]="collapsed() ? 'Expandir sidebar' : 'Logo da Aplicação'"
        [title]="collapsed() ? 'Expandir sidebar' : 'Logo da Aplicação'"
        [class.cursor-e-resize]="collapsed()"
      >
        @if (collapsed() && logoHovered()) {
        <svg
          class="icone w-6 h-6 text-on-surface-variant"
          aria-hidden="true"
          focusable="false"
        >
          <use [attr.href]="'/sprite.svg#icon-sidebar'"></use>
        </svg>
        } @else {
        <img
          ngSrc="assets/logo.png"
          alt="Logo"
          width="24"
          height="24"
          class="w-6 h-6 object-cover rounded-xl"
        />
        }
      </button>

      <span
        class="text-on-surface title-medium truncate max-w-[6.5rem]"
        [class.hidden]="collapsed()"
      >
        {{ userName() }}
      </span>
    </div>

    @if (!collapsed()) {
    <button
      type="button"
      class="h-10 w-10 flex items-center justify-center cursor-e-resize rounded-xl font-medium hover:bg-surface-container2"
      (click)="$event.stopPropagation(); toggle()"
      aria-label="Colapsar sidebar"
      title="Alternar sidebar"
    >
      <svg
        class="icone text-on-surface-variant"
        aria-hidden="true"
        focusable="false"
      >
        <use [attr.href]="'/sprite.svg#icon-sidebar'"></use>
      </svg>
    </button>
    }
  </div>

  <div class="space-y-1 p-2">
    @for (item of menuItems; track item.route) {
    <a
      class="flex items-center gap-3 rounded-full cursor-pointer transition-colors text-on-surface-variant [&:not(.bg-primary)]:hover:bg-surface-container2"
      (click)="$event.stopPropagation()"
      [routerLink]="item.route"
      routerLinkActive="bg-primary text-white shadow-md"
      [routerLinkActiveOptions]="{ exact: true }"
      [class.justify-between]="!collapsed()"
      [class.px-4]="!collapsed()"
      [class.py-4]="!collapsed()"
      [class.w-12]="collapsed()"
      [class.h-12]="collapsed()"
      [class.justify-center]="collapsed()"
      [attr.aria-label]="collapsed() ? item.label : null"
      [attr.title]="collapsed() ? item.label : null"
    >
      <span class="title-medium" [class.hidden]="collapsed()">
        {{ item.label }}
      </span>
      <svg class="icone w-6 h-6 shrink-0" aria-hidden="true" focusable="false">
        <use [attr.href]="item.icon"></use>
      </svg>
    </a>
    }
  </div>
</nav>