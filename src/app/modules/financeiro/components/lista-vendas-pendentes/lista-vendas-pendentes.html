@if (isLoading()) {
<ul
  role="list"
  style="max-height: calc(100vh - 200px); scrollbar-gutter: stable"
  class="flex flex-col overflow-y-auto"
  aria-label="Carregando Pendentes"
>
  @for (i of [0,1,2,3]; track i) {
  <li
    class="rounded-xl border border-[#f0f0f0] bg-white p-4 shadow-soft m-2 animate-pulse"
  >
    <div class="grid grid-cols-2 gap-4">
      <div class="flex flex-col gap-3">
        <div class="h-5 w-1/3 bg-surface-container rounded"></div>
        <div class="h-4 w-2/3 bg-surface-container rounded"></div>
        <div class="h-4 w-1/2 bg-surface-container rounded"></div>
        <div class="flex gap-3">
          <div class="h-4 w-24 bg-surface-container rounded"></div>
          <div class="h-4 w-16 bg-surface-container rounded"></div>
        </div>
      </div>
      <div class="flex flex-col gap-2 items-end">
        <div class="h-5 w-32 bg-surface-container rounded"></div>
        <div class="h-6 w-24 bg-surface-container rounded-full"></div>
        <div class="flex gap-2">
          <div class="h-8 w-28 bg-surface-container rounded-full"></div>
          <div class="h-8 w-24 bg-surface-container rounded-full"></div>
        </div>
      </div>
    </div>
  </li>
  }
</ul>
} @else if (!vendas().length) {
<div class="flex flex-col justify-center items-center h-32 text-center">
  <svg class="w-12 h-12 text-on-surface-variant mb-2" aria-hidden="true">
    <use [attr.href]="'/sprite.svg#icon-inventario'"></use>
  </svg>
  <p class="body-large text-on-surface-variant">Nenhuma venda pendente.</p>
</div>
} @else {
<ul
  role="list"
  style="max-height: calc(100vh - 200px); scrollbar-gutter: stable"
  class="flex flex-col overflow-y-auto transition-opacity duration-200"
  [class.opacity-0]="isLoading()"
  [class.opacity-100]="!isLoading()"
  aria-label="Lista de Pendentes"
>
  @for (v of vendas(); track v.id) {
  <li
    class="relative group rounded-xl border border-[#f0f0f0] bg-white px-12 py-6 shadow-soft m-2"
  >
    <div class="grid grid-cols-2 gap-4 items-center relative">
      <span
        aria-hidden="true"
        class="pointer-events-none absolute top-6 bottom-6 left-1/2 -translate-x-1/2 w-px bg-surface-container2"
      ></span>
      <!-- divisor -->
      <div class="flex flex-col justify-center">
        <div class="title-large text-on-surface">{{ v.nomeCliente }}</div>
        <div class="mb-4 body-large text-on-surface-variant">
          Peça: {{ v.produto.nome }}
        </div>
        <div class="mt-2 flex items-center gap-3">
          <span
            class="inline-flex items-center gap-1.5 body-large text-on-surface-variant"
          >
            <svg class="icone text-on-surface-variant" aria-hidden="true">
              <use
                [attr.href]="
                  '/sprite.svg#' +
                  (v.formaPagamento === 'PIX'
                    ? 'icon-pix'
                    : v.formaPagamento === 'DINHEIRO'
                    ? 'icon-dinheiro'
                    : 'icon-card')
                "
              ></use>
            </svg>
            {{ v.formaPagamento }}
          </span>
        </div>
        <div class="mt-2 flex items-center gap-3">
          <span
            class="inline-flex items-center gap-1.5 body-large text-on-surface-variant"
          >
            <svg class="icone text-on-surface-variant" aria-hidden="true">
              <use href="/sprite.svg#icon-calendar"></use>
            </svg>
            <span>{{ v.parcelasPagas }}/{{ v.totalParcelas }}</span>
          </span>
          <span
            class="inline-flex items-center gap-1.5 body-large text-on-surface-variant bg-surface-container p-1 rounded-xl border-1 border-surface-container2"
            >{{ v.dataVencimento || "-" }}
          </span>
        </div>
        <div class="mt-2 flex items-center gap-3">
          <span
            class="inline-flex items-center gap-1.5 body-large text-on-surface-variant"
          >
            <svg class="icone text-on-surface-variant" aria-hidden="true">
              <use href="/sprite.svg#icon-dinheiro"></use>
            </svg>
            <span
              class="inline-flex items-center gap-1.5 body-large text-on-surface-variant bg-secundary p-1 rounded-xl border-1 border-primary"
              >Pago: R$ {{ v.valorTotalParcelasPagas | number : '1.2-2' }}
            </span>
          </span>
        </div>
      </div>
      <div class="flex flex-col gap-2 items-center justify-center">
        <p class="body-large text-on-surface-variant">
          Venda: R$ {{ v.precoVenda | number : "1.2-2" }}
        </p>
        <div
          class="bg-secundary text-on-surface-variant rounded-xl px-3 py-2 body-large border-1 border-primary"
        >
          Lucro: R$ {{ v.lucro | number : "1.2-2" }}
        </div>
      </div>
    </div>
    <!-- Ações hover -->
    <div
      class="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col gap-2 items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200"
    >
      <button
        type="button"
        aria-label="Pagar parcela"
        title="Pagar parcela"
        class="flex h-10 w-10 items-center justify-center rounded-full bg-transparent text-on-surface-variant hover:bg-gray-100 cursor-pointer"
        (click)="pagarParcela.emit(v.id)"
      >
        <svg class="w-6 h-6" aria-hidden="true">
          <use href="/sprite.svg#icon-registrar"></use>
        </svg>
      </button>
      <button
        type="button"
        aria-label="Cancelar venda"
        title="Cancelar venda"
        class="flex h-10 w-10 items-center justify-center rounded-full bg-transparent text-on-surface-variant hover:bg-gray-100 cursor-pointer"
        (click)="cancelar.emit(v.id)"
      >
        <svg class="w-10 h-10" aria-hidden="true">
          <use href="/sprite.svg#icon-cancel"></use>
        </svg>
      </button>
    </div>
  </li>
  }
</ul>
}
