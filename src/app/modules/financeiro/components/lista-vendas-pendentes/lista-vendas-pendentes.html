@if (isLoading()) {
<ul
  role="list"
  style="max-height: calc(100vh - 200px); scrollbar-gutter: stable"
  class="flex flex-col overflow-y-auto"
  aria-label="Carregando Pendentes"
>
  @for (i of [0,1,2,3]; track i) {
  <li
    class="rounded-xl border border-[#f0f0f0] bg-white p-4 shadow-soft m-2 animate-pulse"
  >
    <div class="grid grid-cols-2 gap-4">
      <div class="flex flex-col gap-3">
        <div class="h-5 w-1/3 bg-surface-container rounded"></div>
        <div class="h-4 w-2/3 bg-surface-container rounded"></div>
        <div class="h-4 w-1/2 bg-surface-container rounded"></div>
        <div class="flex gap-3">
          <div class="h-4 w-24 bg-surface-container rounded"></div>
          <div class="h-4 w-16 bg-surface-container rounded"></div>
        </div>
      </div>
      <div class="flex flex-col gap-2 items-end">
        <div class="h-5 w-32 bg-surface-container rounded"></div>
        <div class="h-6 w-24 bg-surface-container rounded-full"></div>
        <div class="flex gap-2 mt-auto">
          <div class="h-8 w-28 bg-surface-container rounded-full"></div>
          <div class="h-8 w-24 bg-surface-container rounded-full"></div>
        </div>
      </div>
    </div>
  </li>
  }
</ul>
} @else if (!vendas().length) {
<div class="flex flex-col justify-center items-center h-32 text-center">
  <svg class="w-12 h-12 text-on-surface-variant mb-2" aria-hidden="true">
    <use [attr.href]="'/sprite.svg#icon-inventario'"></use>
  </svg>
  <p class="body-large text-on-surface-variant">Nenhuma venda pendente.</p>
</div>
} @else {
<ul
  role="list"
  style="max-height: calc(100vh - 200px); scrollbar-gutter: stable"
  class="flex flex-col overflow-y-auto transition-opacity duration-200"
  [class.opacity-0]="isLoading()"
  [class.opacity-100]="!isLoading()"
  aria-label="Lista de Pendentes"
>
  @for (v of vendas(); track v.id) {
  <li class="rounded-xl border border-[#f0f0f0] bg-white p-4 shadow-soft m-2">
    <div class="grid grid-cols-2 gap-4">
      <div class="flex flex-col gap-1">
        <div class="title-medium text-on-surface">{{ v.nomeCliente }}</div>
        <div class="mb-4 body-large text-on-surface-variant">
          Pe√ßa: {{ v.produto.nome }}
        </div>
        <div class="mt-2 flex items-center gap-3">
          <span
            class="inline-flex items-center gap-1.5 body-medium text-on-surface-variant"
          >
            <svg class="icone text-on-surface-variant" aria-hidden="true">
              <use
                [attr.href]="
                  '/sprite.svg#' +
                  (v.formaPagamento === 'PIX'
                    ? 'icon-pix'
                    : v.formaPagamento === 'DINHEIRO'
                    ? 'icon-dinheiro'
                    : 'icon-card')
                "
              ></use>
            </svg>
            {{ v.formaPagamento }}
          </span>
        </div>
        <div class="mt-2 flex items-center gap-3">
          <span
            class="inline-flex items-center gap-1.5 body-medium text-on-surface-variant"
          >
            <svg class="icone text-on-surface-variant" aria-hidden="true">
              <use href="/sprite.svg#icon-calendar"></use>
            </svg>
            <span>{{ v.parcelasPagas }}/{{ v.totalParcelas }}</span>
          </span>
          <span
            class="inline-flex items-center gap-1.5 body-medium text-on-surface-variant bg-surface-container p-1 rounded-xl border-2 border-surface-container2"
            >{{ v.dataVencimento || "-" }}
          </span>
        </div>
        <div class="mt-2 flex items-center gap-3">
          <span
            class="inline-flex items-center gap-1.5 body-medium text-on-surface-variant"
          >
            <svg class="icone text-on-surface-variant" aria-hidden="true">
              <use href="/sprite.svg#icon-dinheiro"></use>
            </svg>
            <span
              class="inline-flex items-center gap-1.5 body-medium text-on-surface-variant bg-secundary p-1 rounded-xl border-2 border-primary"
              >{{ v.dataVencimento || "-" }}
            </span>
          </span>
        </div>
      </div>
      <div class="flex flex-col gap-1 items-end">
        <p class="body-large text-on-surface-variant">
          Venda: R$ {{ v.precoVenda | number : "1.2-2" }}
        </p>
        <div class="bg-secundary text-on-surface-variant rounded-xl px-3 py-2 text-sm border-2 border-primary">
          Lucro: R$ {{ v.lucro | number : "1.2-2" }}
        </div>
        <div class="flex gap-2 mt-auto">
          <button
            class="bg-green-600 text-white rounded-full px-3 py-1 text-sm"
            (click)="pagarParcela.emit(v.id)"
          >
            Pagar parcela
          </button>
          <button
            class="bg-red-100 text-red-800 rounded-full px-3 py-1 text-sm"
            (click)="cancelar.emit(v.id)"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </li>
  }
</ul>
}
