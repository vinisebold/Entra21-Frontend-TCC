<div class="fixed inset-0 z-50 flex items-end justify-end p-4">
  <div
    role="dialog"
    aria-modal="true"
    aria-labelledby="dialog-title"
    class="w-full max-w-md rounded-2xl bg-[#FBFAF7] shadow-[0_12px_30px_rgba(0,0,0,0.15)] ring-1 ring-black/5"
  >
    <div class="flex items-center justify-between px-5 py-4">
      <h2 id="dialog-title" class="text-lg font-semibold text-neutral-800">
        Adicionar Cliente
      </h2>
      <button
        aria-label="Fechar"
        (click)="onFecharClick()"
        class="inline-flex h-8 w-8 items-center justify-center rounded-full text-neutral-500 hover:bg-neutral-100 hover:text-neutral-700 focus:outline-none focus:ring-2 focus:ring-neutral-300"
      >
        <svg
          class="icone text-on-surface-variant"
          aria-hidden="true"
          focusable="false"
        >
          <use [attr.href]="'/sprite.svg#icon-cancel'"></use>
        </svg>
      </button>
    </div>

    <div class="px-5 pb-5">
      <form
        [formGroup]="clienteForm"
        (ngSubmit)="onSalvarClick()"
        class="space-y-5"
      >
        <fieldset
          [disabled]="isLoading()"
          class="space-y-5 transition-opacity"
          [class.opacity-50]="isLoading()"
        >
          <!-- Linha 1: Nome (100%) -->
          <div class="space-y-2">
            <label
              for="nome"
              class="block text-[0.95rem] font-medium text-neutral-700"
              >Nome*</label
            >
            <input
              id="nome"
              type="text"
              placeholder="Informe o nome do cliente..."
              class="h-11 w-full rounded-full border border-neutral-200 bg-white px-4 text-[0.95rem] text-neutral-800 placeholder:text-neutral-400 shadow-[inset_0_1px_0_rgba(0,0,0,0.02)] focus:border-neutral-300 focus:outline-none focus:ring-2 focus:ring-[#9AA56B]/40"
              formControlName="nome"
            />
          </div>

          <!-- Linha 2: Descrição (100%) -->
          <div class="space-y-2">
            <label
              for="descricao"
              class="block text-[0.95rem] font-medium text-neutral-700"
              >Descrição*</label
            >
            <input
              id="descricao"
              type="text"
              placeholder="Informe a descrição..."
              class="h-11 w-full rounded-full border border-neutral-200 bg-white px-4 text-[0.95rem] text-neutral-800 placeholder:text-neutral-400 focus:border-neutral-300 focus:outline-none focus:ring-2 focus:ring-[#9AA56B]/40"
              formControlName="descricao"
            />
          </div>

          <!-- Linha 3: Telefone (100%) -->
          <div class="space-y-2">
            <label
              for="telefone"
              class="block text-[0.95rem] font-medium text-neutral-700"
              >Telefone*</label
            >
            <div class="relative">
              <input
                id="telefone"
                type="tel"
                appTelefoneMask
                placeholder="(00) 00000-0000"
                class="h-11 w-full rounded-full border border-neutral-200 bg-white pr-4 pl-4 text-[0.95rem] text-neutral-800 placeholder:text-neutral-400 focus:border-neutral-300 focus:outline-none focus:ring-2 focus:ring-[#9AA56B]/40"
                formControlName="telefone"
              />
            </div>
          </div>

          <!-- Linha 4: Mais informações (colapsável) -->
          <div class="border-t border-neutral-200 pt-3">
            <button
              type="button"
              class="flex w-full items-center justify-between gap-2 text-left text-sm font-medium text-neutral-700 hover:text-neutral-900"
              (click)="toggleMaisInfo()"
              [attr.aria-expanded]="mostrarMaisInfo()"
            >
              <span class="inline-flex items-center gap-2">
                <span class="select-none">Mais informações</span>
              </span>
              <svg
                class="h-5 w-5 transition-transform"
                [class.rotate-180]="mostrarMaisInfo()"
                aria-hidden="true"
                focusable="false"
              >
                <use [attr.href]="'/sprite.svg#icon-dropdown'"></use>
              </svg>
            </button>

            @if (mostrarMaisInfo()) {
            <div class="mt-3 space-y-4">
              <div class="space-y-2">
                <label
                  for="cpf"
                  class="block text-[0.95rem] font-medium text-neutral-700"
                  >CPF/CNPJ (opcional)</label
                >
                <div class="relative">
                  <input
                    id="cpf"
                    type="text"
                    inputmode="numeric"
                    appCpfCnpjMask
                    placeholder="000.000.000-00"
                    class="h-11 w-full rounded-full border border-neutral-200 bg-white pr-4 pl-4 text-[0.95rem] text-neutral-800 placeholder:text-neutral-400 focus:border-neutral-300 focus:outline-none focus:ring-2 focus:ring-[#9AA56B]/40"
                    formControlName="cpf"
                  />
                </div>
              </div>

              <div class="space-y-2">
                <label
                  for="email"
                  class="block text-[0.95rem] font-medium text-neutral-700"
                  >E-mail (opcional)</label
                >
                <input
                  id="email"
                  type="email"
                  placeholder="exemplo@email.com"
                  class="h-11 w-full rounded-full border border-neutral-200 bg-white px-4 text-[0.95rem] text-neutral-800 placeholder:text-neutral-400 focus:border-neutral-300 focus:outline-none focus:ring-2 focus:ring-[#9AA56B]/40"
                  formControlName="email"
                />
              </div>
            </div>
            }
          </div>
        </fieldset>

        <div class="flex items-center justify-between pt-2">
          <app-botao
            [type]="'submit'"
            [label]="'Salvar'"
            [icon]="'icon-check'"
            [disabled]="isLoading()"
            [loading]="isLoading()"
            [loadingLabel]="'Salvando...'"
          ></app-botao>
          <button
            type="button"
            (click)="onFecharClick()"
            [disabled]="isLoading()"
            class="px-4 py-2 text-sm font-medium text-neutral-500 hover:text-neutral-700 disabled:opacity-50"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
